---
title: Experiments with a directional coupler
author: Erik
date: '2022-04-03'
slug: []
categories: []
tags: []
---


<div id="TOC">
<ul>
<li><a href="#design-considerations">Design considerations</a></li>
</ul>
</div>

<p>It has been a radio weekend. Not only have worked a bit of HF (including
Morocco and the Canary Islands!), but I have finally gotten around to winding
transformers for the directional coupler of a station power/SWR meter. A while
back I ordered a batch of PCBs for DJ0ABRs power meter
<a href="https://youtu.be/hSHQAcMrIEk">U02 - Power / SWR measuring coupler</a>. It was
designed to be part of his kilo-Watt amplifier. This seemed like a good
idea at the time.</p>
<p>The main design concept is to use a tandem match directional coupler,
and then use highly sensitive AD8307 log amplifier to measure the forward
and the reflected power.
<a href="https://youtu.be/byF1FLdbUiA">Alan Wolke, W2AEW, has an explanation of how this coupler works.</a>
The AD8307 log amplifier I have used also as part of my stand-alone lab
power meter (still need to fix some software bugs).</p>
<div class="figure">
<img src="images/LRM_20220403_145820.jpg" width="600" alt="" />
<p class="caption">Schematic of coupler.</p>
</div>
<p>The schematics of the coupler is not complicated, but I only feel I understand
it fully in short glimpses. The core idea is to sense both current and voltage
in the line from A to B, and that can be measured over C and D to give us the
forward and the reflected power. The full design then use 50 Ohm terminations
and an AD8307 each at C and D for the RF measurements. The two transformers
are <span class="math inline">\(1:N\)</span> turns (with the one turn being a coax through the center of
ring ferrite cores that have the <span class="math inline">\(N\)</span> windings). There is also an electrostatic
shield connected to ground.</p>
<p>I built it up on one of the board I had ordered. Everything looks
very good on the nano VNA - fully terminated, the return loss at the transmitter
port is 35 dB or more.</p>
<div class="figure">
<img src="images/LRM_20220403_133731.jpg" width="600" alt="" />
<p class="caption">Picture of coupler and VNA.</p>
</div>
<p>For measurements, I used the TinySA spectrum analyzer. I put -10dBm into
the transmitter port at 50MHz, varied the load impedance, and measured the power
in the forward and the reflected port (taking care that the measurement
port that wasn’t connected was terminated with 50 Ohm).</p>
<p>Here are the measurements, Power is measured in dBm and the calculated
return loss (RL) in dB:</p>
<div id="gwvrnzgoks" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#gwvrnzgoks .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#gwvrnzgoks .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#gwvrnzgoks .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#gwvrnzgoks .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#gwvrnzgoks .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#gwvrnzgoks .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#gwvrnzgoks .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#gwvrnzgoks .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#gwvrnzgoks .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#gwvrnzgoks .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#gwvrnzgoks .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#gwvrnzgoks .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#gwvrnzgoks .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#gwvrnzgoks .gt_from_md > :first-child {
  margin-top: 0;
}

#gwvrnzgoks .gt_from_md > :last-child {
  margin-bottom: 0;
}

#gwvrnzgoks .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#gwvrnzgoks .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#gwvrnzgoks .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#gwvrnzgoks .gt_row_group_first td {
  border-top-width: 2px;
}

#gwvrnzgoks .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#gwvrnzgoks .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#gwvrnzgoks .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#gwvrnzgoks .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#gwvrnzgoks .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#gwvrnzgoks .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#gwvrnzgoks .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#gwvrnzgoks .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#gwvrnzgoks .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#gwvrnzgoks .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#gwvrnzgoks .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#gwvrnzgoks .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#gwvrnzgoks .gt_left {
  text-align: left;
}

#gwvrnzgoks .gt_center {
  text-align: center;
}

#gwvrnzgoks .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#gwvrnzgoks .gt_font_normal {
  font-weight: normal;
}

#gwvrnzgoks .gt_font_bold {
  font-weight: bold;
}

#gwvrnzgoks .gt_font_italic {
  font-style: italic;
}

#gwvrnzgoks .gt_super {
  font-size: 65%;
}

#gwvrnzgoks .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

#gwvrnzgoks .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#gwvrnzgoks .gt_slash_mark {
  font-size: 0.7em;
  line-height: 0.7em;
  vertical-align: 0.15em;
}

#gwvrnzgoks .gt_fraction_numerator {
  font-size: 0.6em;
  line-height: 0.6em;
  vertical-align: 0.45em;
}

#gwvrnzgoks .gt_fraction_denominator {
  font-size: 0.6em;
  line-height: 0.6em;
  vertical-align: -0.05em;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">frequency</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">Pin</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">Pforward</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">Preflected</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">Rload</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">RL</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_right">50</td>
<td class="gt_row gt_right">-10</td>
<td class="gt_row gt_right">-32.0</td>
<td class="gt_row gt_right">-56.0</td>
<td class="gt_row gt_left">50R</td>
<td class="gt_row gt_right">24.0</td></tr>
    <tr><td class="gt_row gt_right">50</td>
<td class="gt_row gt_right">-10</td>
<td class="gt_row gt_right">-32.0</td>
<td class="gt_row gt_right">-32.0</td>
<td class="gt_row gt_left">open</td>
<td class="gt_row gt_right">0.0</td></tr>
    <tr><td class="gt_row gt_right">50</td>
<td class="gt_row gt_right">-10</td>
<td class="gt_row gt_right">-32.0</td>
<td class="gt_row gt_right">-33.0</td>
<td class="gt_row gt_left">short</td>
<td class="gt_row gt_right">1.0</td></tr>
    <tr><td class="gt_row gt_right">50</td>
<td class="gt_row gt_right">-10</td>
<td class="gt_row gt_right">-31.5</td>
<td class="gt_row gt_right">-42.3</td>
<td class="gt_row gt_left">25R</td>
<td class="gt_row gt_right">10.8</td></tr>
  </tbody>
  
  
</table>
</div>
<p>Note that R presents this with a bit more apparent precision that is called for.</p>
<p>To the results:</p>
<ol style="list-style-type: decimal">
<li>With proper termination, we measure 22 dB down in the forward direction. Since
1/12 in voltage correspond to <span class="math inline">\(-20 \log_{10}(12)=-21.6\)</span> dB, that is reasonable.
A return loss of 24 is quite good, corresponding to a SWR of about 1.1.</li>
<li>With an open load, all power is reflected, as expected.</li>
<li>The short was improvised with a pair of tweezer in the BNC jack. At 50MHz
probably imperfect. So a tiny bit of return loss.</li>
<li>With two 50 Ohm loads in parallel (on a T adapter), the return loss was 11 dB.
and the short (implemented with a pair of tweezers) was probably not a good
RF short. Theoretically, the return loss should be <span class="math inline">\(-20 \log_{10} \Gamma\)</span>, with
<span class="math inline">\(\Gamma\)</span> being the reflection coefficient. With a purely resistive load of 25 Ohm,
<span class="math inline">\(\Gamma = |25 - 50|/|25 + 50| = 1/3\)</span>, and the calculated return loss should be
9.5. Instead I measure more than one dB more. But with the return loss being
the difference between two imprecise measurements, I don’t think this is a
something to worry about.</li>
</ol>
<p>I also kept the input constant at -10 dBm and varied the frequency from 1 to
90 MHz:</p>
<div id="vtjfsteiue" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#vtjfsteiue .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#vtjfsteiue .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#vtjfsteiue .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#vtjfsteiue .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#vtjfsteiue .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#vtjfsteiue .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#vtjfsteiue .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#vtjfsteiue .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#vtjfsteiue .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#vtjfsteiue .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#vtjfsteiue .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#vtjfsteiue .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#vtjfsteiue .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#vtjfsteiue .gt_from_md > :first-child {
  margin-top: 0;
}

#vtjfsteiue .gt_from_md > :last-child {
  margin-bottom: 0;
}

#vtjfsteiue .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#vtjfsteiue .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#vtjfsteiue .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#vtjfsteiue .gt_row_group_first td {
  border-top-width: 2px;
}

#vtjfsteiue .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#vtjfsteiue .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#vtjfsteiue .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#vtjfsteiue .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#vtjfsteiue .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#vtjfsteiue .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#vtjfsteiue .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#vtjfsteiue .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#vtjfsteiue .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#vtjfsteiue .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#vtjfsteiue .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#vtjfsteiue .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#vtjfsteiue .gt_left {
  text-align: left;
}

#vtjfsteiue .gt_center {
  text-align: center;
}

#vtjfsteiue .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#vtjfsteiue .gt_font_normal {
  font-weight: normal;
}

#vtjfsteiue .gt_font_bold {
  font-weight: bold;
}

#vtjfsteiue .gt_font_italic {
  font-style: italic;
}

#vtjfsteiue .gt_super {
  font-size: 65%;
}

#vtjfsteiue .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

#vtjfsteiue .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#vtjfsteiue .gt_slash_mark {
  font-size: 0.7em;
  line-height: 0.7em;
  vertical-align: 0.15em;
}

#vtjfsteiue .gt_fraction_numerator {
  font-size: 0.6em;
  line-height: 0.6em;
  vertical-align: 0.45em;
}

#vtjfsteiue .gt_fraction_denominator {
  font-size: 0.6em;
  line-height: 0.6em;
  vertical-align: -0.05em;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">frequency</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">Pin</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">Pforward</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">Preflected</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">Rload</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">RL</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_right">1</td>
<td class="gt_row gt_right">-10</td>
<td class="gt_row gt_right">-32</td>
<td class="gt_row gt_right">-63</td>
<td class="gt_row gt_left">50R</td>
<td class="gt_row gt_right">31</td></tr>
    <tr><td class="gt_row gt_right">10</td>
<td class="gt_row gt_right">-10</td>
<td class="gt_row gt_right">-31</td>
<td class="gt_row gt_right">-64</td>
<td class="gt_row gt_left">50R</td>
<td class="gt_row gt_right">33</td></tr>
    <tr><td class="gt_row gt_right">20</td>
<td class="gt_row gt_right">-10</td>
<td class="gt_row gt_right">-30</td>
<td class="gt_row gt_right">-61</td>
<td class="gt_row gt_left">50R</td>
<td class="gt_row gt_right">31</td></tr>
    <tr><td class="gt_row gt_right">30</td>
<td class="gt_row gt_right">-10</td>
<td class="gt_row gt_right">-31</td>
<td class="gt_row gt_right">-61</td>
<td class="gt_row gt_left">50R</td>
<td class="gt_row gt_right">30</td></tr>
    <tr><td class="gt_row gt_right">40</td>
<td class="gt_row gt_right">-10</td>
<td class="gt_row gt_right">-31</td>
<td class="gt_row gt_right">-58</td>
<td class="gt_row gt_left">50R</td>
<td class="gt_row gt_right">27</td></tr>
    <tr><td class="gt_row gt_right">50</td>
<td class="gt_row gt_right">-10</td>
<td class="gt_row gt_right">-31</td>
<td class="gt_row gt_right">-57</td>
<td class="gt_row gt_left">50R</td>
<td class="gt_row gt_right">26</td></tr>
    <tr><td class="gt_row gt_right">60</td>
<td class="gt_row gt_right">-10</td>
<td class="gt_row gt_right">-31</td>
<td class="gt_row gt_right">-55</td>
<td class="gt_row gt_left">50R</td>
<td class="gt_row gt_right">24</td></tr>
    <tr><td class="gt_row gt_right">70</td>
<td class="gt_row gt_right">-10</td>
<td class="gt_row gt_right">-33</td>
<td class="gt_row gt_right">-55</td>
<td class="gt_row gt_left">50R</td>
<td class="gt_row gt_right">22</td></tr>
    <tr><td class="gt_row gt_right">80</td>
<td class="gt_row gt_right">-10</td>
<td class="gt_row gt_right">-34</td>
<td class="gt_row gt_right">-56</td>
<td class="gt_row gt_left">50R</td>
<td class="gt_row gt_right">22</td></tr>
    <tr><td class="gt_row gt_right">90</td>
<td class="gt_row gt_right">-10</td>
<td class="gt_row gt_right">-45</td>
<td class="gt_row gt_right">-66</td>
<td class="gt_row gt_left">50R</td>
<td class="gt_row gt_right">21</td></tr>
  </tbody>
  
  
</table>
</div>
<p>Respecting the accuracy of the measurements, it seems that the the coupler
behaves well up to 60-70 MHz, and the gross deviations from linearity only
happens above 80 MHz. I am quite happy about this.</p>
<div id="design-considerations" class="section level2">
<h2>Design considerations</h2>
<p>The important question is how turns should be wound on the transformers.
DJ0ABR design with 24 turns, for a 2kW capacity. I have no planned need
to measure that large amount of power, and there are two costs to having too
many turns: First, there is limited dynamic range in the measurement system.
Second, more turns will degrade performance of the transformers at higher
frequencies.</p>
<p>One place to start is with the capacity of the
<a href="https://www.analog.com/en/products/ad8307.html">AD8307</a>. It is specified
to measure up to 17 dBm and down to -75 dBm. I would also like to have
accurate measure of return loss with QRP rigs running perhaps only 1W. I try
to calculate some scenarios.</p>
<p>First, let’s vary the number of turns from 10 to 30. Then, I would like
to measure the reflected power for a good match with a return loss of 25 dB.
I calculate what forward and reflected powers I’ll need to have the sensor
read for different powers from the transmitter and see how this range
fits within the dynamic range of AD8307.</p>
<p>Note that there is also a voltage divider in front of the AD8307
in DJ0ABR’s design. This also involves a coupler of DC blocker
capacitors, but these are large and basically shorts at
RF. The internal impedance of AD8307 is, according to the
datasheet, about 1k1 Ohm. In the design, this is paralleled
with an 180R resistor, giving a parallel resistance
of 155. This is the lower leg of a divider
with 470R in the upper leg, so the voltage division
is by a factor of around 4,
or -12.1 dB.</p>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-6-1.svg" width="576" /></p>
<p>I don’t completely understand how DJ0ABR can use this design to
measure up to 2 kW with only 24 turns. Maybe the resistor network
in front of the chip could be adjusted, or maybe a modification
is called for.</p>
<p>If I were to change anything about the design, I think that I also
would like to create a bit more space for the transformers. The 1-turn
of coax through the ferrite cores makes it difficult to solder the very
short piece of the shield without melting the coax. Perhaps it is my Ultraflex
coax that doesn’t take heat well, but putting things together would be easier
with more space. Maybe that would compromise the coupler at VHF. But if I could
run with fewer turns on the transformer, I think that would make more of a
difference at 50 (and maybe 70) Mhz.</p>
</div>
